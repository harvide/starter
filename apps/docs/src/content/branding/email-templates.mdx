# Email Templates

Harvide Starter provides customizable email templates for all transactional and marketing communications. This guide covers how to customize and manage your email templates.

## Template Configuration

Configure email templates in your `starter.config.ts`:

```typescript
export default {
  email: {
    enabled: true,
    provider: "resend", // or "smtp"
    from: {
      admin: {
        email: "admin@example.com",
        name: "Admin Team"
      },
      support: {
        email: "support@example.com",
        name: "Support Team"
      },
      noReply: {
        email: "noreply@example.com"
      }
    },
    templates: {
      verification: {
        subject: "Verify your email address",
        variant: "modern"
      },
      resetPassword: {
        subject: "Reset your password",
        variant: "modern"
      }
    }
  }
}
```

## Available Templates

### Authentication Templates

1. **Email Verification**
   - Location: `packages/mail/src/transactional/emails/email-verification/variants/`
   - Used for: New user email verification
   - Variants: `default`, `modern`, `minimal`

2. **Password Reset**
   - Location: `packages/mail/src/transactional/emails/reset-password/variants/`
   - Used for: Password reset requests
   - Variants: `default`, `modern`, `minimal`

3. **Welcome Email**
   - Location: `packages/mail/src/transactional/emails/welcome/variants/`
   - Used for: New user onboarding
   - Variants: `default`, `modern`, `minimal`

## Creating Custom Variants

1. **Create Template File**
   ```typescript
   // packages/mail/src/transactional/emails/verification/variants/custom.tsx
   import { VerificationEmailProps } from '../types';
   
   export function CustomVerificationEmail({
     verificationLink,
     userName
   }: VerificationEmailProps) {
     return (
       <EmailTemplate>
         <Heading>Welcome, {userName}!</Heading>
         <Text>Click the button below to verify your email.</Text>
         <Button href={verificationLink}>
           Verify Email
         </Button>
       </EmailTemplate>
     );
   }
   ```

2. **Register Variant**
   ```typescript
   // packages/mail/src/transactional/emails/verification/index.ts
   import { CustomVerificationEmail } from './variants/custom';
   
   export const variants = {
     default: DefaultVerificationEmail,
     modern: ModernVerificationEmail,
     custom: CustomVerificationEmail
   };
   ```

3. **Use Custom Variant**
   ```typescript
   export default {
     email: {
       templates: {
         verification: {
           variant: "custom"
         }
       }
     }
   }
   ```

## Template Components

### Built-in Components

```typescript
import {
  EmailTemplate,
  Heading,
  Text,
  Button,
  Divider,
  Image,
  Link,
  Section
} from '@harvide/mail';
```

### Layout Components

1. **EmailTemplate**
   ```typescript
   <EmailTemplate>
     <Section>Your content</Section>
   </EmailTemplate>
   ```

2. **Section**
   ```typescript
   <Section spacing="lg">
     <Heading>Section Title</Heading>
     <Text>Section content</Text>
   </Section>
   ```

### Content Components

1. **Text Components**
   ```typescript
   <Heading size="lg">Main Title</Heading>
   <Text color="gray">Regular text</Text>
   ```

2. **Interactive Elements**
   ```typescript
   <Button href="/action" variant="primary">
     Click Me
   </Button>
   <Link href="/learn-more">Learn More</Link>
   ```

## Styling Templates

### Global Styles

```typescript
export default {
  email: {
    styles: {
      colors: {
        primary: "#007AFF",
        background: "#FFFFFF",
        text: "#1F2937"
      },
      fonts: {
        heading: "Arial, sans-serif",
        body: "Helvetica, sans-serif"
      }
    }
  }
}
```

### Component-Level Styles

```typescript
<Button
  style={{
    backgroundColor: "brand.primary",
    borderRadius: "md",
    padding: "md"
  }}
>
  Click Me
</Button>
```

## Best Practices

1. **Design**
   - Use responsive layouts
   - Keep designs simple and compatible
   - Test in multiple email clients
   - Optimize images for email

2. **Content**
   - Clear and concise messaging
   - Consistent brand voice
   - Proper call-to-action placement
   - Accessibility considerations

3. **Technical**
   - Use inline CSS for compatibility
   - Test with spam filters
   - Include text alternatives
   - Optimize for mobile

## Testing

1. **Local Testing**
   ```bash
   # Preview email template
   npm run email:preview
   
   # Send test email
   npm run email:test
   ```

2. **Multiple Clients**
   - Test in various email clients
   - Check mobile rendering
   - Verify link functionality
   - Test personalization

## Template Variables

Available variables for customization:

```typescript
interface EmailTemplateVariables {
  // User information
  userName?: string;
  userEmail: string;
  
  // Action URLs
  actionUrl?: string;
  verificationLink?: string;
  resetPasswordLink?: string;
  
  // Branding
  companyName: string;
  companyLogo?: string;
  
  // Custom data
  metadata?: Record<string, any>;
}
```

## Development Tips

1. **Local Development**
   - Use preview mode for quick iterations
   - Test with real email services
   - Verify all links and actions

2. **Debugging**
   - Check email logs
   - Monitor spam scores
   - Test variable replacement
   - Verify template loading

3. **Maintenance**
   - Regular template updates
   - Performance monitoring
   - Client compatibility checks
   - Content reviews
